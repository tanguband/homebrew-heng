## **変愚蛮怒 Mac Homebrew XQuartz**

Mac のパッケージ管理システム Homebrew を利用して  
変愚蛮怒の最新版をソースからコンパイルしてインストールします。  
インストール方法を読んでそのまま実行するだけで誰でも簡単にできます。
***
## **インストール方法**
***
### **・Homebrew のインストール**

世界中の Mac ユーザーが利用するソフトウェア管理システムです。 
 
[Homebrew](https://brew.sh/index_ja) に行き インストール の下に書いてあるコマンド  
/bin/bash...(以下略) をダブルクリックしてからコピーします。

ターミナル アプリケーションを起動します。  
( 場所は アプリケーション > ユーティリティ > ターミナル )

先程コピーしたコマンドをターミナルにペーストして実行。

Homebrew のインストールが始まります。

途中で Mac のパスワードを聞かれるので入力します。  
( システムの重要な場所にファイルをインストールするのに必要 )
***
### **・XQuartz のインストール　＃導入済みの場合は不要**

変愚蛮怒をマルチウィンドウで実行するのに必要です。

Homebrew からインストールします。  

ターミナルに以下のコマンドをコピーして実行  

**brew install xquartz**

途中で Mac のパスワードを聞かれるので入力します。  
***
### **・エディタのインストール　＃導入済みの場合は不要**

必要なファイルの編集に使用します。  

愛用のエディタがある場合はそれを使用してください。    

ない場合は BBEdit を Homebrew からインストール  

**brew install bbedit**
***
### **・日本語 等幅フォントのインストール**

変愚蛮怒を正確に画面表示するのに必要になります。

初期設定ファイルではウインドウ位置とウインドウサイズは  
Ricty Diminished フォントを想定して調整してあります。

他の日本語等幅フォントの利用も可能ですが初期設定の調整が必要になります。

日本語等幅 以外のフォントでは画面がうまく表示できません。

Homebrew からインストールします

**brew tap homebrew/cask-fonts**  

* 上の処理が終了したら  

**brew install font-ricty-diminished**
***
### **・変愚蛮怒 heng コマンドのインストール**

変愚蛮怒のインストールや管理を コマンドで簡単に行なえるようにします。

Homebrew からインストールします

**brew tap tanguband/heng**  

* 上の処理が終了したら  

**brew install heng**

インストールが完了したらターミナルから heng コマンドが使えます。
***
### **・変愚蛮怒 heng コマンドの説明**

**heng-help**  
* heng コマンドの一覧がターミナル画面に表示されます。  

**heng-dir**  
* 変愚蛮怒ディレクトリを Finder で開きます。

**heng-install**  
* 変愚蛮怒をインストールします。

**heng**  
* 変愚蛮怒を起動します。

**heng-update**  
* 変愚蛮怒と heng コマンドを更新します。

**heng-delete**  
* 変愚蛮怒と heng コマンドを削除します  

***
### **・変愚蛮怒 のインストール**

**heng-install** コマンドをターミナルに入力します。

変愚蛮怒の最新のソースをダウンロードしてあなたの Macでコンパイルが始まります。  
  
CPU を最大限に利用して 1 ~ 2 分程度でコンパイルは終了します。  

変愚ディレクトリ ( ~/.hengdir ) が作成されて必要なファイルがインストールされます。

***
**以上でインストールは終了です。**
***
### **・変愚ディレクトリの説明**

**heng-dir** コマンドをターミナルに入力して変愚ディレクトリを開きます。

* コンパイルしたソフトウェアはファイルの位置関係がとても重要です。  
* ディレクトリのファイル構成を変更すると起動しなくなります。  
* ファイルの移動や削除をしないでください。  

apex フォルダ
* ゲームのスコアデータが入ります。  

heng.config  
* 設定ファイルです。  

hengband フォルダ
* 変愚蛮怒のゲーム起動に必要なファイルが入っています。  

old フォルダ
* 変愚蛮怒の更新または再インストール後は  
更新前の heng.config ファイルは old フォルダにバックアップされます。  
* ファイル名は heng.config_XXXXXXXX ( Xは数字 )   
数字が一番大きいものが直前のファイルです。  
* 古いファイルは必要なければ削除できます。

save フォルダ
* ゲームのセーブデータが入ります。  
* 更新または再インストール時のデータは保護されます。  
* ゲーム内で死亡した場合は消えます。  
* バックアップした場合はスコア送信禁止。

user フォルダ
* プレイ記録、自動拾い設定ファイル、ユーザー設定ファイルなどが入ります。

***
### **・変愚蛮怒 の設定ファイル**

変愚ディレクトリの heng.config をエディタで開きます。

＊　はじめにキャラクタ名だけは必ず設定してください。　＊  

設定が終わったら保存してファイルを閉じます。  

はじめは他のパラメータはそのままで起動します。  

ゲームに慣れて細かい調整をしたくなったらパラメータの変更をしてください。

詳しい説明が書いてありますので、良く読んで各パラメータの設定をします。  

間違ったパラメータを設定すると設定は読み込まれません。  

起動しない場合は設定ファイルを見直してください。  

新しい設定ファイルは書式が変更になる場合がありますので  
バックアップしたファイルの内容を移すときは注意してください。

***
### **・変愚蛮怒 ゲームの開始と終了**  

**heng** コマンドをターミナルに入力してゲームを開始します。  

XQuartz が起動して変愚蛮怒のウインドウが表示されます。

メインウインドウの右下をつかんでウインドウサイズの変更が可能です。

ウインドウなどを調整したい場合は設定ファイルの内容を確認してください。

ゲーム自体の解説はゲーム内の **?** コマンドでヘルプを読んでください。

セーブして終了するときは **control + X** コマンドです。  
（ command + Q では終了しません ）  

***
### **・変愚蛮怒 の更新 または 再インストール**   

現在の変愚蛮怒のソースは開発版のため頻繁に更新があります。

更新のタイミングは  
* ゲーム中のキャラクタの勝利、死亡などでセーブデータに区切りがついた  
* 現在のバージョンで不具合がありゲームが続けられない など。  


以上の場合は **heng-update** コマンドをターミナルに入力します。  
（ ソースに変更がある場合は更新になります。 ）
***

### **・変愚蛮怒 の削除**

**heng-delete** コマンドで削除します。  
（セーブデータと設定ファイルは保護されます。)

セーブデータも消す場合は ~/.hengdir フォルダを全て削除してください。

***

### **・Homebrew の削除**

変愚蛮怒を削除後に Homebrew を利用しない場合は削除できます。  
[Homebrew](https://docs.brew.sh/FAQ#how-do-i-uninstall-homebrew) に行き
uninstall 手順に従って削除してください。
***
### **・FAQ**  
随時更新します。
***